timeseries
  used_bytes          = sum(isilon.storagepool.bytes.used),
  used_hdd_bytes      = sum(isilon.storagepool.bytes.hdd.used),
  used_sdd_bytes      = sum(isilon.storagepool.bytes.sdd.used),
  total_bytes         = sum(isilon.storagepool.bytes.total),
  total_hdd_bytes     = sum(isilon.storagepool.bytes.hdd.total),
  total_sdd_bytes     = sum(isilon.storagepool.bytes.sdd.total)
  , by:{ `dt.entity.ef2:com_dynatrace_extension_isilon_cluster` }
| fieldsAdd
  used_bytes      = arrayLast(used_bytes),
  used_hdd_bytes  = arrayLast(used_hdd_bytes),
  used_sdd_bytes  = arrayLast(used_sdd_bytes),
  total_bytes     = arrayLast(total_bytes),
  total_hdd_bytes = arrayLast(total_hdd_bytes),
  total_sdd_bytes = arrayLast(total_sdd_bytes),
  clusterId       = `dt.entity.ef2:com_dynatrace_extension_isilon_cluster`,
  clusterName     = entityName(`dt.entity.ef2:com_dynatrace_extension_isilon_cluster`)
| fieldsAdd
  used_TB   = used_bytes  / 1000000000000.0,
  total_TB  = total_bytes / 1000000000000.0
| fields
  clusterName,
  clusterId,
  used_bytes,
  used_hdd_bytes,
  used_sdd_bytes,
  total_bytes,
  total_hdd_bytes,
  total_sdd_bytes,
  used_TB,
  total_TB
| sort clusterName
