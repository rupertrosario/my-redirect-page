import { credentialVaultClient } from "@dynatrace-sdk/client-classic-environment-v2";

export default async function () {
  const cred = await credentialVaultClient.getCredentialsDetails({
    id: "b3b5b45e-f57b-4e6a-a5e2-fc4f43b4b1a2"
  });

  const apiKey = cred.token;
  console.log("Using API key from vault:", cred.name);

  // Use it in your fetch
  const headers = { accept: "application/json", apiKey };
  const resp = await fetch("https://helios.cohesity.com/v2/mcm/cluster-mgmt/info", { headers });
  const data = await resp.json();

  return data;
}
