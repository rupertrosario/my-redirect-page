# Simple GET to /v2/alerts-summary with statesList[0..] (kOpen + kNote)
$ErrorActionPreference = "Stop"

$apiKeyPath = "X:\PowerShell\Cohesity_API_Scripts\DO_NOT_Delete\apikey.txt"
$apiKey = (Get-Content -Path $apiKeyPath -Raw).Trim()

$headers = @{
  "apiKey"  = $apiKey
  "Accept"  = "application/json"
}

$base = "https://helios.cohesity.com/v2/alerts-summary"
$uri  = "$base?statesList[0]=kOpen&statesList[1]=kNote"

# Raw JSON output (pretty)
Invoke-RestMethod -Method Get -Uri $uri -Headers $headers | ConvertTo-Json -Depth 8
